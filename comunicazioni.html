<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Verifiche e Informazioni</title>
    <style>
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        th, td {
            border: 1px solid black;
            padding: 8px;
            text-align: left;
        }
        th {
            background-color: #f2f2f2;
        }
        .delete-btn {
            background-color: red;
            color: white;
            border: none;
            padding: 5px 10px;
            cursor: pointer;
        }
        .delete-btn:hover {
            background-color: darkred;
        }
    </style>
</head>
<body>
    <h1>Verifiche e Informazioni</h1>

    <form id="verificaForm">
        <label for="materia">Materia:</label>
        <input type="text" id="materia" name="materia" required><br><br>

        <label for="data">Data:</label>
        <input type="date" id="data" name="data" required><br><br>

        <label for="descrizione">Descrizione:</label>
        <input type="text" id="descrizione" name="descrizione" required><br><br>

        <button type="submit">Aggiungi Verifica</button>
    </form>

    <table id="verificheTable">
        <thead>
            <tr>
                <th>Materia</th>
                <th>Data</th>
                <th>Descrizione</th>
                <th>Azioni</th>
            </tr>
        </thead>
        <tbody>
            <!-- Le righe verranno aggiunte qui dinamicamente -->
        </tbody>
    </table>

    <script>
        const form = document.getElementById('verificaForm');
        const verificheTable = document.getElementById('verificheTable').getElementsByTagName('tbody')[0];
        let verifiche = JSON.parse(localStorage.getItem('verifiche')) || [];

        // Funzione per creare una nuova riga nella tabella
        function aggiungiVerifica(materia, data, descrizione) {
            const row = verificheTable.insertRow();
            row.insertCell(0).innerText = materia;
            row.insertCell(1).innerText = data;
            row.insertCell(2).innerText = descrizione;

            // Crea il bottone di eliminazione
            const deleteCell = row.insertCell(3);
            const deleteBtn = document.createElement('button');
            deleteBtn.innerText = 'X';
            deleteBtn.classList.add('delete-btn');
            deleteBtn.onclick = function() {
                const rowIndex = row.rowIndex - 1;
                verifiche.splice(rowIndex, 1);
                salvaVerifiche();
                verificaTableDeleteRow(rowIndex);
            };
            deleteCell.appendChild(deleteBtn);
        }

        // Funzione per eliminare una riga dalla tabella
        function verificaTableDeleteRow(index) {
            verificheTable.deleteRow(index);
        }

        // Funzione per salvare le verifiche nel LocalStorage
        function salvaVerifiche() {
            localStorage.setItem('verifiche', JSON.stringify(verifiche));
        }

        // Carica le verifiche salvate alla pagina
        verifiche.forEach(verifica => aggiungiVerifica(verifica.materia, verifica.data, verifica.descrizione));

        // Gestisci l'invio del form
        form.addEventListener('submit', function(event) {
            event.preventDefault();

            const materia = document.getElementById('materia').value;
            const data = document.getElementById('data').value;
            const descrizione = document.getElementById('descrizione').value;

            // Aggiungi la verifica alla lista e salva
            verifiche.push({ materia, data, descrizione });
            salvaVerifiche();

            // Aggiungi la verifica alla tabella
            aggiungiVerifica(materia, data, descrizione);

            // Resetta il form
            form.reset();
        });
    </script>
</body>
</html>
